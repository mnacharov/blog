<!DOCTYPE html>
<html lang="ru_ru" prefix="og: http://ogp.me/ns#">
	<head>
		<link href="http://gmpg.org/xfn/11" rel="profile">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta http-equiv="content-type" content="text/html; charset=utf-8">

		<!-- Metadata -->
			<meta name="description" content="" />
			<meta property="og:description" content="" />
			<meta property="og:title" content="mnach" />
			<meta property="og:type" content="website" />
			<meta property="og:url" content="." />
		<meta property="og:image" content="./images/avatar.jpg" />

		<!-- Enable responsiveness on mobile devices-->
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

		<title>mnach</title>

		<!-- CSS -->
		<link href="//fonts.googleapis.com/" rel="dns-prefetch">
		<link href="//fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic|Abril+Fatface|PT+Sans:400,400italic,700&amp;subset=latin,latin-ext" rel="stylesheet">

		<link rel="stylesheet" href="./theme/css/poole.css" />
		<link rel="stylesheet" href="./theme/css/hyde.css" />
		<link rel="stylesheet" href="./theme/css/syntax.css" />
			<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.1.7/css/fork-awesome.min.css" crossorigin="anonymous">

		<!-- Feeds -->
<link href="https://www.mnacharov.ru/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="mnach Full RSS Feed" />

		<!-- Analytics -->
	</head>

	<body class="theme-base-0d">
<div class="sidebar">
	<div class="container sidebar-sticky">
		<div class="sidebar-about">

			<h1>
				<a href="/">
					<img class="profile-picture" src="./images/avatar.jpg">
					mnach
				</a>
			</h1>
			<p class="lead"></p>
			<p class="lead"> </p>
			<p></p>
		</div>
			<ul class="sidebar-nav">
					<li><a href="./pages/about.html">Об авторе</a></li>
			</ul>
		<nav class="sidebar-social">
					<a class="sidebar-social-item" href="https://github.com/mnacharov/" target="_blank">
						<i class="fa fa-GitHub"></i>
					</a>
			<a class="sidebar-social-item" href="https://www.mnacharov.ru/feeds/all.rss.xml">
				<i class="fa fa-rss"></i>
			</a>
		</nav>
	</div>
</div>		<div class="content container">
	<div class="posts">
			<div class="post">
				<h1 class="post-title" href="./streaming-large-zipfile-without-storing.html">
					<a href="./streaming-large-zipfile-without-storing.html">Потоковое скачивание больших zip-файлов</a>
				</h1>
				<span class="post-date">01/17/20</span>
				<p>
					<img alt="Zipfile image" class="post-image align-left" src="./images/2020-01-17-zipfile.png" style="width: 520px;" />
<p><strong>Задача:</strong> отдавать набор файлов с диска одним zip-архивом без потребления памяти</p>
<p>Как ни странно, стандартных утилит <cite>python</cite> и <cite>django</cite> для этого оказалось недостаточно.
Если вкрадце - для этого написана отдельная <a class="reference external" href="https://github.com/allanlei/python-zipstream">либа</a>, на основе стандартного модуля <cite>zipfile</cite>,
которая решает эту проблему. Как-то так:</p>
<div class="highlight"><pre><span></span><span class="c1"># views.py</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span> <span class="nn">django.http …</span></pre></div>
				</p>
				<a class="read-more" href="streaming-large-zipfile-without-storing.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="./django-auth-for-celery-flower.html">
					<a href="./django-auth-for-celery-flower.html">Django authorization for Celery Flower</a>
				</h1>
				<span class="post-date">10/07/18</span>
				<p>
					<img alt="Celery Flower interface" class="post-image align-left" src="./images/2018-10-07-celery-flower.jpeg" style="width: 550px;" />
<p>На картинке изображён интерфейс Celery <a class="reference external" href="https://flower.readthedocs.io/en/latest/">Flower</a>: утилиты для наблюдения за
деятельностью очереди задач celery.</p>
<p>Это удобный инструмент, который позволяет оперативно выявить проблемные задачи,
их статус выполнeния, проверить состояние celery-воркеров, да и просто понять
в каком состоянии находиться система отложенных задач.</p>
<p>Данный инструмент очень просто устанавливается и настраивается, а так-же, имеет …</p>
				</p>
				<a class="read-more" href="django-auth-for-celery-flower.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="./automate-debian-updates.html">
					<a href="./automate-debian-updates.html">Автоматизация обновлений debian</a>
				</h1>
				<span class="post-date">08/21/18</span>
				<p>
					<img alt="Automate debian updates" class="post-image align-left" src="./images/2018-08-21-automate-debian-updates.jpeg" style="width: 440px;" />
<p>Узнал пару &quot;фишек&quot; администрирования серверов, спешу поделиться.</p>
<p>На самом деле, автоматизацией обновления, в стиле Microsoft, мы, конечно, заниматься не будем.
Иначе, рискуем прийти к схожим результатам: обновили систему в автомате ночью, а там что-то
не запустилось, и кто-нибудь вынужден остаться без здорового крепкого сна.</p>
<p>Вместо этого, мы настроим:</p>
<ul class="simple">
<li>скачивание пакетов …</li></ul>
				</p>
				<a class="read-more" href="automate-debian-updates.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="./local-mailrelay-using-postfix.html">
					<a href="./local-mailrelay-using-postfix.html">Локальный почтовый релей средствами postfix</a>
				</h1>
				<span class="post-date">06/03/18</span>
				<p>
					<img alt="Postfix as mail relay" class="post-image align-left" src="./images/2018-06-03-local-mailrelay-using-postfix.jpeg" style="width: 440px;" />
<p>Эх.. Давненько я уже ничего не писал. Сложное это дело писать на естественных языках.
Толи дело на языках программирования! :-) Жаль что NDA часто не даёт выкладывать
шедевры на всеобщее обозрение. Иногда чуствуешь себя поэтом продающим свой талант.</p>
<p>Ну, довольно лирики! Сегодня хочу поделиться простым решением отказоустойчивой
отправки почты с использованием …</p>
				</p>
				<a class="read-more" href="local-mailrelay-using-postfix.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="./python-metaclass-django-orm-choicefield.html">
					<a href="./python-metaclass-django-orm-choicefield.html">Метаклассы Python: Django ORM ChoiceField</a>
				</h1>
				<span class="post-date">11/22/17</span>
				<p>
					<img alt="We need to go deeper" class="post-image align-left" src="./images/2017-11-24-we-need-to-go-deeper.jpeg" style="width: 320px;" />
<p>Мне всегда нравился лаконичный декларативный синтаксис объявления моделей реализованный в Django ORM.</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Musician</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">instrument</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
<p>Конечно, на первый взгляд это похоже на магию: нам не нужно объявлять метод __init__ чтобы описать поля класса,
вместо …</p>
				</p>
				<a class="read-more" href="python-metaclass-django-orm-choicefield.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="./build-debian-package-pyenv-python-version-management.html">
					<a href="./build-debian-package-pyenv-python-version-management.html">Собираем debian-пакет для pyenv (менеджер версий python)</a>
				</h1>
				<span class="post-date">02/11/17</span>
				<p>
					<img alt="Террариум Гвидо Мокафико" class="post-image align-left" src="./images/2017-02-11-build-debian-package-pyenv-python-version-management.jpeg" style="width: 320px;" />
<p>Прошло уже около года как я открыл для себя менеджер версий python - <a class="reference external" href="https://github.com/yyuu/pyenv">pyenv</a>.
Теперь даже сложно представить как мне не надоедало вручную устанавливать python всякий
раз когда понадобится новая версия (отличная от распространяемой в репозиториях debian).
Не говоря уже о том, что действия приходилось повторять, при выкатывании нового проекта
на …</p>
				</p>
				<a class="read-more" href="build-debian-package-pyenv-python-version-management.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="./running-django-scripts.html">
					<a href="./running-django-scripts.html">Запуск скриптов Django</a>
				</h1>
				<span class="post-date">08/09/16</span>
				<p>
					<img alt="Давай-ка без django.setup(), бро!" class="post-image align-left" src="./images/2016-08-09-do-it-without-django-setup.ipg.jpeg" style="width: 320px;" />
<p>При написании программы на python очень удобно проверять результаты своей работы на
практике. Все интерпретируемые языки этому способствуют. Так быстрее! Не знаешь как
работает метод или функция, документация отсутствует, исходный код печалит?
Ок - пишем скриптик с примерным поведением и смотрим на результат. И прояснилось!..</p>
<p>Однако, с django появляются некоторые особенности …</p>
				</p>
				<a class="read-more" href="running-django-scripts.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="./make-friend-with-the-cache.html">
					<a href="./make-friend-with-the-cache.html">Начинаем дружить с кешем</a>
				</h1>
				<span class="post-date">07/29/16</span>
				<p>
					<div class="section" id="id2">
<h2>Или как правильно отдавать статику</h2>
<img alt="If you don't clear your cache after an update - YOU GONNA HAVE A BAD TIME" class="post-image align-left" src="./images/2016-07-29-south-park-instructor-clear-cache.png" style="width: 320px;" />
</div>
<div class="section" id="id3">
<h2>О чём это?</h2>
<p>Одним из самых значимых, на мой взгляд, плюсов реализации проекта в виде
веб-приложения является простота обновления рабочей версии. Которая конечно же
вытекает из клиент-серверной архитектуры. Чтобы что-то исправить вам надо просто
обновить ваш сервер(а), и при следующей загрузке страницы пользователь увидит …</p></div>
				</p>
				<a class="read-more" href="make-friend-with-the-cache.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="./Fabric-automation.html">
					<a href="./Fabric-automation.html">Fabric автоматизация</a>
				</h1>
				<span class="post-date">07/15/16</span>
				<p>
					<img alt="fabric deploy web" class="post-image align-left" src="./images/2016-07-15-deploy.png" style="width: 320px;" />
<p>Итак, Ваш веб-проект, готовый поразить весь мир своей гениальностью, уже написан?
Тогда вам надо срочно развернуть его на каком-нибудь бесперебойном сервере, типа VPS,
а потом продолжить добавлять функционал и фиксить баги...</p>
<p>Однако, зайдя в 100 раз по ssh на сервер и выполнив рутинную цепочку команд:</p>
<div class="highlight"><pre><span></span>$ git pull
$ ./manage.py migrate …</pre></div>
				</p>
				<a class="read-more" href="Fabric-automation.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="./solving-issue-with-ssl-in-requests.html">
					<a href="./solving-issue-with-ssl-in-requests.html">Решаем траблы с ssl в requests</a>
				</h1>
				<span class="post-date">07/07/16</span>
				<p>
					<p>Довольно необычное поведение обнаружил у python библиотеки
<a class="reference external" href="http://requests.readthedocs.io/en/master/">requests</a>
при работе с SSL-сертификатами. Если коротко:
&quot;requests не использует <a class="reference external" href="http://docs.python-requests.org/en/latest/user/advanced/#ca-certificates">системные сертификаты</a>&quot;</p>
<p>Как можно догадаться это приводит к сообщениям о не безопасном соединении,
тогда как система уже давно доверенняет данному сертификату.</p>
<div class="section" id="id2">
<h2>Проявления</h2>
<p>Итак, в каких случаях это может быть проблемой?
Например, Вы поддерживаете …</p></div>
				</p>
				<a class="read-more" href="solving-issue-with-ssl-in-requests.html">Continue reading »</a>
			</div>
	</div>
	<div class="pagination">

		<span class="pagination-item older">Newer</span>

		<span class="pagination-item newer">Older</span>
	</div>
		</div>
	</body>
</html>